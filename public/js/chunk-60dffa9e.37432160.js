(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60dffa9e"],{"101e":function(t,e,n){t.exports=n.p+"img/bg2.df3c1e8f.jpg"},"8fc4":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plar_page"},[i("van-nav-bar",{staticClass:"nav_bar",attrs:{fixed:!0,border:!1,"z-index":"100"},on:{"click-left":function(e){return t.$router.back()}},scopedSlots:t._u([{key:"left",fn:function(){return[i("span",{staticClass:"iconfont icon-zuo"})]},proxy:!0}])}),i("div",{staticClass:"play_btn"},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.isPlay,expression:"isPlay"}],staticClass:"iconfont icon-bofang",on:{click:t.handlePlayBtn}})]),t.video.video?i("video",{ref:"myVideo",attrs:{src:t.video.video},on:{click:t.handlePlayBtn}}):i("img",{attrs:{width:"100%",height:"100%",src:n("101e"),alt:""}}),i("div",{staticClass:"side_nav"},[i("div",{staticClass:"item",style:{color:t.video.isLove?"#f53a35":""},on:{click:t.handleLove}},[i("span",{staticClass:"iconfont icon-iconfontzhizuobiaozhun44",staticStyle:{"font-size":"30px"}}),i("p",[t._v(t._s(t.video.love_num))])]),i("div",{staticClass:"item",on:{click:t.hanldeShowComment}},[i("span",{staticClass:"iconfont icon-pinglun"}),i("p",[t._v(t._s(t.video.comment_num))])]),i("div",{staticClass:"item",on:{click:function(e){return t.handleShare(1)}}},[i("span",{staticClass:"iconfont icon-zhuanfa"}),i("p",[t._v(t._s(t.video.share_num))])])]),i("div",{staticClass:"text_box"},[i("p",[t._v(t._s(t.video.word))])]),i("div",{staticClass:"user_box"},[i("img",{staticClass:"icon",attrs:{src:t.video.photo,alt:""},on:{click:function(e){return t.$router.push("/user")}}}),i("div",{staticClass:"name"},[t._v(t._s(t.video.name))]),i("div",{staticClass:"btn"},[t._v("+关注")])]),i("div",{staticClass:"tool_play"},[i("div",{staticClass:"btn"},[i("span",{staticClass:"iconfont",class:t.isPlay?"icon-bofang":"icon-zanting",on:{click:t.handlePlayBtn}})]),i("div",{staticClass:"progress_bar"},[i("van-slider",{attrs:{"button-size":"18","inactive-color":"#e9edf0","active-color":"#eb5964"},on:{change:t.onChange,"drag-start":t.handleStart},scopedSlots:t._u([{key:"button",fn:function(){return[i("div",{staticClass:"slider_btn"})]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),i("div",{staticClass:"time_box"},[i("span",{staticClass:"start"},[t._v(t._s(t._f("dateFormat")(1e3*t.currentTime)))]),t._v("/"),i("span",{staticClass:"start"},[t._v(t._s(t._f("dateFormat")(1e3*t.duration)))])])]),i("van-popup",{style:{height:"60%",borderRadius:"20px 20px 0 0"},attrs:{position:"bottom"},model:{value:t.showComment,callback:function(e){t.showComment=e},expression:"showComment"}},[i("div",{staticClass:"com_box"},[i("div",{staticClass:"title"},[t._v("最新评论 "+t._s(t.commentList.length))]),t._l(t.commentList,(function(e,s){return i("div",{key:s,staticClass:"item"},[i("div",{staticClass:"user flex_bea"},[i("div",{staticClass:"flex_align"},[e.icon?i("img",{attrs:{src:n("9240"),alt:""}}):i("div",{staticClass:"icon_box"},[i("span",{staticClass:"iconfont icon-user"})]),i("div",{},[i("h3",[t._v(t._s(e.nickname))]),i("p",[t._v(t._s(t._f("datetime_ymd")(e.add_time)))])])]),i("div",{staticClass:"flex_align tool"},[i("span",{staticClass:"iconfont icon-pinglun"}),i("div",{staticClass:"flex_align"},[i("span",{staticClass:"iconfont icon-iconfontzhizuobiaozhun44",on:{click:function(n){return t.handleLoveComClick(e)}}},[i("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(e.love_num))])])])])]),i("div",{staticClass:"content"},[i("h3",[t._v("评论内容")]),i("div",{staticClass:"txt"},[t._v(t._s(e.txt))])])])})),t.showComment?i("div",{staticClass:"input_box flex_bea"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.commentText,expression:"commentText"}],ref:"commentRef",attrs:{type:"text",placeholder:"说点什么, 让更多人记住你"},domProps:{value:t.commentText},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendComment(e)},input:function(e){e.target.composing||(t.commentText=e.target.value)}}}),i("span",{staticClass:"iconfont icon-keyboard",on:{click:t.handleFocus}})]):t._e()],2),0===t.commentList.length?i("div",{staticClass:"none"},[t._v("暂无评论")]):t._e()]),i("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.shareOptions},on:{select:t.shareSelect},model:{value:t.showShare,callback:function(e){t.showShare=e},expression:"showShare"}})],1)},s=[],o=(n("99af"),n("b0c0"),n("498a"),n("96cf"),n("1da1")),a=n("5530"),c=n("2f62"),r={data:function(){return{value:0,isPlay:!0,duration:6e4,interval:null,allTime:0,currentTime:0,video:{},showComment:!1,commentList:[],commentText:"",showShare:!1,shareOptions:[[{name:"微信",icon:"wechat"},{name:"微博",icon:"weibo"},{name:"QQ",icon:"qq"}],[{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"}]]}},created:function(){this.getVideo()},computed:Object(a["a"])({},Object(c["b"])(["userInfo"])),mounted:function(){var t=this;console.log(Date.now()),setTimeout((function(){t.duration=t.$refs.myVideo.duration}),500)},methods:{hanldeShowComment:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.fetch("/mock/getVideoComments");case 2:n=e.sent,t.commentList=n.data.data,t.showComment=!0;case 5:case"end":return e.stop()}}),e)})))()},shareSelect:function(t){var e=window.location.href;this.$toast("将:".concat(e,"\n分享到").concat(t.name)),this.showShare=!1},handleShare:function(t){console.log(t),this.showShare=!0},handleFocus:function(){this.$refs.commentRef.focus()},sendComment:function(){if(console.log(this.commentText),0!==this.commentText.trim().length){var t={id:Math.floor(3e3*Math.random()),nickname:this.userInfo.nickname,love_num:0,txt:this.commentText,icon:this.userInfo.icon,isLove:!1,comment_num:0,share_num:0,add_time:Date.now()};this.commentList.unshift(t)}},handleLoveComClick:function(t){t.isLove=!t.isLove,t.isLove?t.love_num++:t.love_num--},handleLove:function(){this.video.isLove=!this.video.isLove,this.video.isLove,this.video.love_num++},onChange:function(){this.currentTime=this.duration*(this.value/100),this.$refs.myVideo.currentTime=this.currentTime,this.$refs.myVideo.play()},handleStart:function(){this.$refs.myVideo.pause()},getVideo:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.fetch("/mock/getVideo");case 2:n=e.sent,t.video=n.data.data,console.log(n);case 5:case"end":return e.stop()}}),e)})))()},handleReset:function(){this.currentTime=0,this.value=0,this.isPlay=!0},handlePlayBtn:function(){var t=this;if(this.isPlay=!this.isPlay,this.isPlay)this.$refs.myVideo.pause();else{if(this.$refs.myVideo.play(),!this.$refs.myVideo)return;var e=this.$refs.myVideo;setTimeout((function(){t.duration=e.duration,e.addEventListener("timeupdate",(function(n){t.currentTime=e.currentTime,console.log(t.currentTime),t.value=parseInt(t.currentTime/t.duration*100)})),e.addEventListener("ended",(function(e){t.handleReset()}))}),300)}}}},l=r,u=(n("aa60"),n("2877")),d=Object(u["a"])(l,i,s,!1,null,"b3b7552e",null);e["default"]=d.exports},aa60:function(t,e,n){"use strict";var i=n("e137"),s=n.n(i);s.a},e137:function(t,e,n){}}]);
//# sourceMappingURL=chunk-60dffa9e.37432160.js.map